<h1 class="article-title" itemprop="name" style="margin: 0px; word-break: break-word; font-size: 28px; font-weight: normal; padding-top: 15px; text-align: center; color: rgba(0, 0, 0, 0.87); font-family: &quot;Helvetica Neue&quot;, &quot;Luxi Sans&quot;, &quot;DejaVu Sans&quot;, Tahoma, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; background-color: rgb(255, 255, 255);">在 CentOS 7 下安装配置 shadowsocks</h1>
<div class="content-reset article-content" data-link="https://hacpai.com/article/1465786632630" data-author="unhappydepig" style="font-family: &quot;Helvetica Neue&quot;, &quot;Luxi Sans&quot;, &quot;DejaVu Sans&quot;, Tahoma, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; word-wrap: break-word; overflow: auto; line-height: 1.65; font-size: 16px; word-break: break-word; padding-top: 15px; color: rgba(0, 0, 0, 0.87); background-color: rgb(255, 255, 255);">
	<p style="margin: 0px 0px 16px;"><br></p>
	<p style="margin: 0px 0px 16px;">CentOS 7 开始默认使用
		<a href="https://en.wikipedia.org/wiki/Systemd" rel="nofollow" target="_blank" style="outline: 0px; text-decoration-line: none; color: rgb(66, 133, 244);">Systemd</a>作为开启启动脚本的管理工具，
		<a href="https://github.com/shadowsocks/" rel="nofollow" target="_blank" style="outline: 0px; text-decoration-line: none; color: rgb(66, 133, 244);">Shadowsocks</a>则是当前比较受欢迎的科学上网工具，本文将介绍如何在 CentOS 下安装和配置 Shadowsocks 服务。</p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p>
	<h2 id="toc_h2_0" style="margin: 24px 0px 16px; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><a id="_pip_4" rel="nofollow" target="_blank" style="outline: 0px; color: rgb(66, 133, 244);"></a>安装 pip</h2>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;">
		<a href="https://pip.pypa.io/en/stable/installing/" rel="nofollow" target="_blank" style="outline: 0px; text-decoration-line: none; color: rgb(66, 133, 244);">pip</a>是 python 的包管理工具。在本文中将使用 python 版本的 shadowsocks，此版本的 shadowsocks 已发布到 pip 上，因此我们需要通过 pip 命令来安装。</p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;">在控制台执行以下命令安装 pip：</p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p><pre style="position: relative;"><textarea style="margin: 0px; font-size: 16px; vertical-align: middle; font-family: &quot;Helvetica Neue&quot;, &quot;Luxi Sans&quot;, &quot;DejaVu Sans&quot;, Tahoma, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; outline: none; overflow: auto; resize: vertical; position: absolute; top: -100000px;"></textarea><code class="language-bash hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: url(&quot;../images/code-bg.png&quot;) 0% 0% / 20px 20px rgba(0, 0, 0, 0.04); margin: 0px; font-size: 13.6px; border-radius: 5px; font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word; max-height: 666px;">$ curl <span class="hljs-string" style="color: rgb(221, 17, 68);"><span class="hljs-string">"</span><a href="https://bootstrap.pypa.io/get-pip.py" rel="nofollow" target="_blank" style="outline: 0px; text-decoration-line: none; color: rgb(66, 133, 244);"><span class="hljs-string" style="color: rgb(221, 17, 68);">https://bootstrap.pypa.io/get-pip.py</span></a><span class="hljs-string">"</span></span> -o <span class="hljs-string" style="color: rgb(221, 17, 68);">"get-pip.py"</span><br>$ python get-pip.py<br></code></pre>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p>
	<h2 id="toc_h2_1" style="margin: 24px 0px 16px; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><a id="_shadowsocks_15" rel="nofollow" target="_blank" style="outline: 0px; color: rgb(66, 133, 244);"></a>安装配置 shadowsocks</h2>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;">在控制台执行以下命令安装 shadowsocks：</p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p><pre style="position: relative;"><textarea style="margin: 0px; font-size: 16px; vertical-align: middle; font-family: &quot;Helvetica Neue&quot;, &quot;Luxi Sans&quot;, &quot;DejaVu Sans&quot;, Tahoma, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; outline: none; overflow: auto; resize: vertical; position: absolute; top: -100000px;"></textarea><code class="language-bash hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: url(&quot;../images/code-bg.png&quot;) 0% 0% / 20px 20px rgba(0, 0, 0, 0.04); margin: 0px; font-size: 13.6px; border-radius: 5px; font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word; max-height: 666px;">$ pip install --upgrade pip<br>$ pip install shadowsocks<br></code></pre>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;">安装完成后，需要创建配置文件<code style="padding: 0.2em 0.4em; margin: 0px; font-size: 13.6px; background-color: rgba(252, 41, 41, 0.12); border-radius: 3px; color: rgb(210, 63, 49); font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word;">/etc/shadowsocks.json</code>，内容如下：</p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p><pre style="position: relative;"><textarea style="margin: 0px; font-size: 16px; vertical-align: middle; font-family: &quot;Helvetica Neue&quot;, &quot;Luxi Sans&quot;, &quot;DejaVu Sans&quot;, Tahoma, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; outline: none; overflow: auto; resize: vertical; position: absolute; top: -100000px;"></textarea><code class="language-json hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: url(&quot;../images/code-bg.png&quot;) 0% 0% / 20px 20px rgba(0, 0, 0, 0.04); margin: 0px; font-size: 13.6px; border-radius: 5px; font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word; max-height: 666px;">{<br><span class="hljs-attr">"server"</span>: <span class="hljs-string" style="color: rgb(221, 17, 68);">"0.0.0.0"</span>,<br><span class="hljs-attr">"server_port"</span>: <span class="hljs-number" style="color: rgb(0, 128, 128);">8388</span>,<br><span class="hljs-attr">"password"</span>: <span class="hljs-string" style="color: rgb(221, 17, 68);">"uzon57jd0v869t7w"</span>,<br><span class="hljs-attr">"method"</span>: <span class="hljs-string" style="color: rgb(221, 17, 68);">"aes-256-cfb"</span><br>}<br></code></pre>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;"></p>
	<p style="margin: 0px 0px 16px;">说明：</p>
	<p style="margin: 0px 0px 16px;"></p>
	<ul style="margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><br>
		<li style="margin-top: 0.25em;"><code style="padding: 0.2em 0.4em; margin: 0px; font-size: 13.6px; background-color: rgba(252, 41, 41, 0.12); border-radius: 3px; color: rgb(210, 63, 49); font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word;">method</code>为加密方法，可选<code style="padding: 0.2em 0.4em; margin: 0px; font-size: 13.6px; background-color: rgba(252, 41, 41, 0.12); border-radius: 3px; color: rgb(210, 63, 49); font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word;">aes-128-cfb, aes-192-cfb, aes-256-cfb, bf-cfb, cast5-cfb, des-cfb, rc4-md5, chacha20, salsa20, rc4, table</code></li><br>
		<li style="margin-top: 0.25em;"><code style="padding: 0.2em 0.4em; margin: 0px; font-size: 13.6px; background-color: rgba(252, 41, 41, 0.12); border-radius: 3px; color: rgb(210, 63, 49); font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word;">server_port</code>为服务监听端口</li><br>
		<li style="margin-top: 0.25em;"><code style="padding: 0.2em 0.4em; margin: 0px; font-size: 13.6px; background-color: rgba(252, 41, 41, 0.12); border-radius: 3px; color: rgb(210, 63, 49); font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word;">password</code>为密码，可使用
			<a href="http://ucdok.com/project/generate_password.html" rel="nofollow" target="_blank" style="outline: 0px; text-decoration-line: none; color: rgb(66, 133, 244);">密码生成工具</a>生成一个随机密码</li><br></ul><br>
	<p style="margin: 0px 0px 16px;">以上三项信息在配置 shadowsocks 客户端时需要配置一致，具体说明可查看 shadowsocks 的帮助文档。</p><br>
	<h2 id="toc_h2_2" style="margin: 24px 0px 16px; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><a id="_43" rel="nofollow" target="_blank" style="outline: 0px; color: rgb(66, 133, 244);"></a>配置自启动</h2><br>
	<p style="margin: 0px 0px 16px;">新建启动脚本文件<code style="padding: 0.2em 0.4em; margin: 0px; font-size: 13.6px; background-color: rgba(252, 41, 41, 0.12); border-radius: 3px; color: rgb(210, 63, 49); font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word;">/etc/systemd/system/shadowsocks.service</code>，内容如下：</p><br><pre style="position: relative;"><textarea style="margin: 0px; font-size: 16px; vertical-align: middle; font-family: &quot;Helvetica Neue&quot;, &quot;Luxi Sans&quot;, &quot;DejaVu Sans&quot;, Tahoma, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; outline: none; overflow: auto; resize: vertical; position: absolute; top: -100000px;"></textarea><code class="hljs accesslog" style="display: block; overflow-x: auto; padding: 0.5em; background: url(&quot;../images/code-bg.png&quot;) 0% 0% / 20px 20px rgba(0, 0, 0, 0.04); margin: 0px; font-size: 13.6px; border-radius: 5px; font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word; max-height: 666px;"><span class="hljs-string" style="color: rgb(221, 17, 68);">[Unit]</span><br>Description=Shadowsocks<br><span class="hljs-string" style="color: rgb(221, 17, 68);">[Service]</span><br>TimeoutStartSec=0<br>ExecStart=/usr/bin/ssserver -c /etc/shadowsocks.json<br><span class="hljs-string" style="color: rgb(221, 17, 68);">[Install]</span><br>WantedBy=multi-user.target<br></code></pre><br>
	<p style="margin: 0px 0px 16px;">执行以下命令启动 shadowsocks 服务：</p><br><pre style="position: relative;"><textarea style="margin: 0px; font-size: 16px; vertical-align: middle; font-family: &quot;Helvetica Neue&quot;, &quot;Luxi Sans&quot;, &quot;DejaVu Sans&quot;, Tahoma, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; outline: none; overflow: auto; resize: vertical; position: absolute; top: -100000px;"></textarea><code class="language-bash hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: url(&quot;../images/code-bg.png&quot;) 0% 0% / 20px 20px rgba(0, 0, 0, 0.04); margin: 0px; font-size: 13.6px; border-radius: 5px; font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word; max-height: 666px;">$ systemctl <span class="hljs-built_in" style="color: rgb(0, 134, 179);">enable</span> shadowsocks<br>$ systemctl start shadowsocks<br></code></pre><br>
	<p style="margin: 0px 0px 16px;">为了检查 shadowsocks 服务是否已成功启动，可以执行以下命令查看服务的状态：</p><br><pre style="position: relative;"><textarea style="margin: 0px; font-size: 16px; vertical-align: middle; font-family: &quot;Helvetica Neue&quot;, &quot;Luxi Sans&quot;, &quot;DejaVu Sans&quot;, Tahoma, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; outline: none; overflow: auto; resize: vertical; position: absolute; top: -100000px;"></textarea><code class="language-bash hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: url(&quot;../images/code-bg.png&quot;) 0% 0% / 20px 20px rgba(0, 0, 0, 0.04); margin: 0px; font-size: 13.6px; border-radius: 5px; font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word; max-height: 666px;">$ systemctl status shadowsocks <span class="hljs-_">-l</span><br></code></pre><br>
	<p style="margin: 0px 0px 16px;">如果服务启动成功，则控制台显示的信息可能类似这样：</p><br><pre style="position: relative;"><textarea style="margin: 0px; font-size: 16px; vertical-align: middle; font-family: &quot;Helvetica Neue&quot;, &quot;Luxi Sans&quot;, &quot;DejaVu Sans&quot;, Tahoma, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; outline: none; overflow: auto; resize: vertical; position: absolute; top: -100000px;"></textarea>
		<code class="hljs accesslog" style="display: block; overflow-x: auto; padding: 0.5em; background: url(&quot;../images/code-bg.png&quot;) 0% 0% / 20px 20px rgba(0, 0, 0, 0.04); margin: 0px; font-size: 13.6px; border-radius: 5px; font-family: mononoki, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; word-break: break-word; max-height: 666px;">● shadowsocks.service - Shadowsocks<br>Loaded: loaded (/etc/systemd/system/shadowsocks.service; enabled; vendor preset: disabled)<br>Active: active (running) since Mon <span class="hljs-number" style="color: rgb(0, 128, 128);">2015</span>-<span class="hljs-number" style="color: rgb(0, 128, 128);">12</span>-<span class="hljs-number" style="color: rgb(0, 128, 128);">21</span> <span class="hljs-number" style="color: rgb(0, 128, 128);">23</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">51</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">48</span> CST; 11min ago<br>Main PID: <span class="hljs-number" style="color: rgb(0, 128, 128);">19334</span> (ssserver)<br>CGroup: /system.slice/shadowsocks.service<br>└─<span class="hljs-number" style="color: rgb(0, 128, 128);">19334</span> /usr/bin/python /usr/bin/ssserver -c /etc/shadowsocks.json<br>Dec <span class="hljs-number" style="color: rgb(0, 128, 128);">21</span> <span class="hljs-number" style="color: rgb(0, 128, 128);">23</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">51</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">48</span> morning.work systemd<span class="hljs-string" style="color: rgb(221, 17, 68);">[1]</span>: Started Shadowsocks.<br>Dec <span class="hljs-number" style="color: rgb(0, 128, 128);">21</span> <span class="hljs-number" style="color: rgb(0, 128, 128);">23</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">51</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">48</span> morning.work systemd<span class="hljs-string" style="color: rgb(221, 17, 68);">[1]</span>: Starting Shadowsocks...<br>Dec <span class="hljs-number" style="color: rgb(0, 128, 128);">21</span> <span class="hljs-number" style="color: rgb(0, 128, 128);">23</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">51</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">48</span> morning.work ssserver<span class="hljs-string" style="color: rgb(221, 17, 68);">[19334]</span>: INFO: loading config from /etc/shadowsocks.json<br>Dec <span class="hljs-number" style="color: rgb(0, 128, 128);">21</span> <span class="hljs-number" style="color: rgb(0, 128, 128);">23</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">51</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">48</span> morning.work ssserver<span class="hljs-string" style="color: rgb(221, 17, 68);">[19334]</span>: <span class="hljs-number" style="color: rgb(0, 128, 128);">2015</span>-<span class="hljs-number" style="color: rgb(0, 128, 128);">12</span>-<span class="hljs-number" style="color: rgb(0, 128, 128);">21</span> <span class="hljs-number" style="color: rgb(0, 128, 128);">23</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">51</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">48</span> INFO     loading libcrypto from libcrypto.so.10<br>Dec <span class="hljs-number" style="color: rgb(0, 128, 128);">21</span> <span class="hljs-number" style="color: rgb(0, 128, 128);">23</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">51</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">48</span> morning.work ssserver<span class="hljs-string" style="color: rgb(221, 17, 68);">[19334]</span>: <span class="hljs-number" style="color: rgb(0, 128, 128);">2015</span>-<span class="hljs-number" style="color: rgb(0, 128, 128);">12</span>-<span class="hljs-number" style="color: rgb(0, 128, 128);">21</span> <span class="hljs-number" style="color: rgb(0, 128, 128);">23</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">51</span>:<span class="hljs-number" style="color: rgb(0, 128, 128);">48</span> INFO     starting server at <span class="hljs-number" style="color: rgb(0, 128, 128);">0.0.0.0:8388</span><br></code><div><span class="hljs-number" style="color: rgb(0, 128, 128);"><br></span></div></pre></div>